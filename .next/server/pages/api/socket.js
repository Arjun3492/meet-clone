"use strict";(()=>{var e={};e.id=31,e.ids=[31],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9505:e=>{e.exports=import("socket.io")},2418:(e,o,t)=>{t.a(e,async(e,r)=>{try{t.r(o),t.d(o,{config:()=>d,default:()=>l,routeModule:()=>u});var a=t(1764),n=t(241),s=t(1549),i=t(6561),c=e([i]);i=(c.then?(await c)():c)[0];let l=(0,s.l)(i,"default"),d=(0,s.l)(i,"config"),u=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/socket",pathname:"/api/socket",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},6561:(e,o,t)=>{t.a(e,async(e,r)=>{try{t.r(o),t.d(o,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(9505),n=e([a]);a=(n.then?(await n)():n)[0];let __WEBPACK_DEFAULT_EXPORT__=(e,o)=>{if(console.log("called api"),o.socket.server.io)console.log("socket already running");else{let e=new a.Server(o.socket.server);o.socket.server.io=e,e.on("connection",e=>{console.log("server is connected"),e.on("join-room",(o,t)=>{console.log(`a new user ${t} joined room ${o}`),e.join(o),e.broadcast.to(o).emit("user-connected",t)}),e.on("user-toggle-audio",(o,t)=>{e.join(t),e.broadcast.to(t).emit("user-toggle-audio",o)}),e.on("user-toggle-video",(o,t)=>{e.join(t),e.broadcast.to(t).emit("user-toggle-video",o)}),e.on("user-leave",(o,t)=>{e.join(t),e.broadcast.to(t).emit("user-leave",o)})})}o.end()};r()}catch(e){r(e)}})}};var o=require("../../webpack-api-runtime.js");o.C(e);var __webpack_exec__=e=>o(o.s=e),t=o.X(0,[676],()=>__webpack_exec__(2418));module.exports=t})();